<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Electrician Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-dark text-light">

<nav class="navbar navbar-dark bg-secondary px-3 mb-3">
    <span class="navbar-brand"><i class="fa-solid fa-bolt"></i> Maintenance Mode</span>
    <a href="/logout" class="btn btn-sm btn-light">Exit</a>
</nav>

<div class="container-fluid">

    <div class="card bg-secondary text-white mb-4 p-3">
        <h5><i class="fa-solid fa-screwdriver-wrench"></i> Install New Unit</h5>
        <form th:action="@{/device/add}" method="post" class="row g-2">
            <div class="col-md-3"><input type="text" name="name" class="form-control form-control-sm" placeholder="Device ID/Name" required></div>
            <div class="col-md-2">
                <select name="type" class="form-select form-select-sm">
                    <option value="AC">HVAC (AC)</option>
                    <option value="Generator">Generator</option>
                    <option value="Pump">Water Pump</option>
                </select>
            </div>
            <div class="col-md-2"><input type="number" name="powerRating" class="form-control form-control-sm" placeholder="Max Watts" required></div>
            <div class="col-md-3"><input type="text" name="location" class="form-control form-control-sm" placeholder="Grid Location"></div>
            <div class="col-md-2"><button class="btn btn-warning btn-sm w-100 fw-bold">INSTALL</button></div>
        </form>
    </div>

    <table class="table table-dark table-hover table-bordered table-sm">
        <thead>
        <tr>
            <th>Device</th>
            <th>Owner (Added By)</th>
            <th>Rating</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="device : ${devices}">
            <td th:text="${device.name}">Name</td>
            <td th:text="${device.addedBy}" class="text-info">System</td>
            <td th:text="${device.powerRating + ' W'}">0 W</td>
            <td>
                <span class="badge" th:classappend="${device.status == 'ON' ? 'bg-success' : 'bg-danger'}" th:text="${device.status}">OFF</span>
            </td>
            <td>
                <a th:href="@{'/device/toggle/' + ${device.id}}" class="btn btn-outline-light btn-sm py-0">Toggle</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>